<!DOCTYPE html>
<html lang="en">
    
    <head>
        <meta charset="utf-8" />
        <title></title>        
    </head>    
    <body>
    </body>
        
    <script type="module">
        import DaMonster from './dist/core/damonster.js';
        import DaPlayer from './dist/component/daplayer.js';
        
        import Observable from './dist/utility/observable.js';
        
        var map = []; 
        var daMonster = window.daMonster = new DaMonster();
                
        //data binding to component...
        //swap whatever variable we needed to proxy so that we can do the binding....                                
        daMonster.players.forEach((p, index) =>{
        
            let daPlayer = new DaPlayer();
            
                
            Observable.addListener(p, 'hand', (newValue)=>{
                let cards = ':';
                p.hand.forEach((c, index) =>{
                    cards += ( '(' + index + ' :: ' + c.tostring() + '), ');
                });
                daPlayer.setAttribute('data-hand', cards);
                //console.log(p.name + ' ' + newValue);
            });       
            
            Observable.addListener(p, 'hero', (newValue)=>{                         
                daPlayer.setAttribute('data-hero', newValue ? newValue.tostring() : 'N/A'); 
                
                //remove existing listener and hook to new hero.item                                                
                           
            });                          
                             
            document.body.appendChild(daPlayer);
                                 
        });
        
        daMonster.New();

    </script>

</html>